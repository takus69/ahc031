# [AHC031](https://atcoder.jp/contests/ahc031)

## 考察

- 日数D: 5 <= D <= 50(一様分布)
- 予約数N 5 <= N <= 50(一様分布)
- グリッドの縦横の長さW: W = 1,000
- 予約の面積a: (5/8)*W^2 <= Σa_d_i(d日の予約の面積の和) <= (799/800)*W^2
  - 予約の面積の和T_d: T_d = Σa_d_i, W^2-(3/2)*T_d <= T_d <= W^2-(1/2)*T_d
  - 平均空き面積E: E = W^2*e^2
    - パラメータe: 1/20 <= e <= 1/2
  - T_dより小さい整数をN-1出力して、ソート後その間隔をaとする。おそらくT_d/Nを平均とする正規分布になるのではないか。分散は？？？
- 平均空き面積が少ないと全部配置できない
- コスト
  - 予約の面積aを満たせないと、面積当たり100のコスト
  - 配置を変えて、パーティションを撤去・設置の長さ当たり1のコスト
    - 初日だけはコスト0
    - 外周はコスト0
- コスト改善の要素
  - 配置の最適化
  - 配置換えの最適化
- 最適化の手法
  - 配置を変えることで配置のコストが改善しないか(d日目のみで判定)
  - 配置を変えることで配置換えのコストが改善しないか(d-1, d, d+1日目で判定)
    - d-1, d+1の配置を変えないことで、それ以外に影響を与えない
    - 上記2つの最適化は、d日目の配置を変えることでトータルのコスト改善をみれば、山登りができる
- コスト計算の手法(ツールのコード見ると最適な算出方法で記載されてそう)
  - 配置のコストは、配置の面積と予約の面積の差分
  - 配置換えのコストは、縦と横それぞれでソート後コストを計算。縦と横のパーティションはそれぞれ高々D*2となる。前後を比較する際に左から順にみて、同じ軸の重なりを計算。それぞれO(N*2)程度
- 配置の妥当性
  - 配置は、重なりがないか。縦と横それぞれでソート後に重なりを確認するといいが、複数の長方形と比較する場合にどうするか？？？
- 初期配置
  - 大きい面積から配置を決めるのがよさそう
  - 形はどう決めるか？？？
    - 正方形に近い方が、面積に対するパーティションの数が少ないためコストが少なくなりやすいと考えられる
- 配置の変更
  - 配置の変更はどのように見直すのが良いのか？？？
- 効率の良い配置
  - T_dの違いによって変化があるが、T_dが一定と仮定すると、aの分布は同じとなるはず。そのため、初期配置を使いまわせるのが一番効率が良い
  - 使いまわすと配置換えコストが0となる。ただし予約の面積から不足する分のコストがかかる場合がある
  - 平均空き面積Eが大きい場合は、余裕の持った面積の配置をすることでコスト0を実現できそう
  - コストに対する面積の増加分というパラメータを見るといいかも

## ToDo

- aの分布をみる
- 構造体の設計
  - Room: パーティションで区切った部屋。面積を返す
  - Arrangement: ある日のRoomの配置。
  - Solution: 出力結果とコスト
- サンプルプログラム実装(Done)
- 一括実行実装(Python?)
